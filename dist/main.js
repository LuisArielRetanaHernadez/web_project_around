(()=>{"use strict";class e{constructor(e){this._popup=document.querySelector(e)}open(){this._popup.classList.add("popup--active")}close(){console.log("close form Popup"),this._popup.classList.remove("popup--active")}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popup.addEventListener("click",(e=>{e.target===this._popup&&this.close()})),this._popup.querySelector(".popup__icon-close").addEventListener("click",(()=>this.close())),document.addEventListener("keydown",this._handleEscClose)}}class t extends e{constructor(e){super(e),this._popupImage=this._popup.querySelector(".popup__image"),this._popupCaption=this._popup.querySelector(".popup__title")}open(e,t){this._popupImage.src=t,this._popupImage.alt=e,this._popupCaption.textContent=e,super.open()}}class s extends e{constructor(e,t){super(e),this._handleFormSubmit=t}_getInputValues(){const e=this._popup.querySelectorAll(".popup__form-input"),t={};return e.forEach((e=>{t[e.name]=e.value})),t}close(){super.close(),console.log("form popup ",this._popup.querySelector(".popup__form")),this._popup.querySelector(".popup__form").reset()}setEventListeners(){super.setEventListeners(),this._popup.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t),this.close()}))}}class r{constructor({title:e,url:t},s,r){this._title=e,this._url=t,this._selectorElement=s,this._handleCardClick=r}_getTemplate(){return document.querySelector(this._selectorElement).content.querySelector(".card").cloneNode(!0)}createCard(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".card__title").textContent=this._title,this._element.querySelector(".card__image").setAttribute("src",this._url),this._element}_setEventListeners(){this._element.querySelector(".card__image").addEventListener("click",(()=>{this._handleCardClick(this._title,this._url)})),this._element.querySelector(".card__icon-love").addEventListener("click",(()=>{this._likeCard()})),this._element.querySelector(".card__icon-delete-image").addEventListener("click",(()=>{this._deleteCard()}))}_likeCard(){this._element.querySelector(".card__icon-love").classList.toggle("card__icon-love_active")}_deleteCard(){this._element.remove(),this._element=null}}class o{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_hasInvalidInput(e){return e.some((e=>!e.validity.valid))}_toggleButtonState(e,t){this._hasInvalidInput(e)?(t.classList.add(this._inactiveButtonClass),t.disabled=!0):(t.classList.remove(this._inactiveButtonClass),t.disabled=!1)}_showErrorInput(e,t){const s=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),s.textContent=t,s.classList.add(this._errorClass)}_hiddenErrorInput(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hiddenErrorInput(e):this._showErrorInput(e,e.validationMessage)}_setEventListeners(){const e=Array.from(this._formElement.querySelectorAll(this._inputSelector)),t=this._formElement.querySelector(this._submitButtonSelector);this._toggleButtonState(e,t),e.forEach((s=>{s.addEventListener("input",(()=>{this._checkInputValidity(s),this._toggleButtonState(e,t)}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}const n=document.querySelector(".profile__button-add-target"),i=document.querySelector(".profile__button-update-profile"),l=(document.querySelector(".elements__card"),document.querySelector(".profile__name")),p=document.querySelector(".profile__state"),a=new class{constructor({items:e,renderer:t},s){this._items=e,this._renderer=t,this._container=document.querySelector(s)}renderer(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"fragmento de codigo html",link:"https://images.pexels.com/photos/270404/pexels-photo-270404.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{name:"carro mercede benz",link:"https://images.pexels.com/photos/2365572/pexels-photo-2365572.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{name:"manoplaza red bull",link:"https://images.pexels.com/photos/19417092/pexels-photo-19417092/free-photo-of-deportes-de-motor-exposicion-formula-1-f1.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{name:"palacio de bellas artes desde arriba",link:"https://images.pexels.com/photos/1589347/pexels-photo-1589347.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{name:"angel de la independencia",link:"https://images.pexels.com/photos/14071000/pexels-photo-14071000.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{name:"perro chihuahua banandose",link:"https://images.pexels.com/photos/485294/pexels-photo-485294.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"}],renderer:e=>{const s=new r({title:e.name,url:e.link},"#template-card",((e,s)=>{console.log(e,s);const r=new t(".popup--imagen-card");r.setEventListeners(),r.open(e,s)})).createCard();a.addItem(s)}},".elements__cards");a.renderer();const c=new s(".popup--create-card",(e=>{const{title:s,url:o}=e,n=new r({title:s,url:o},"#template-card",((e,s)=>{const r=new t(".popup--imagen-card");r.setEventListeners(),r.open(e,s)})).createCard();a.addItem(n)}));n.addEventListener("click",(()=>{c.open(),c.setEventListeners(),new o({formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__button-submit",inactiveButtonClass:"form__button-submit_disabled",inputErrorClass:"form__input_type_error",errorClass:".form__error_visible"},c._popup).enableValidation()}));const u=new s(".popup--update-profile",(e=>{const{name:t,state:s}=e;l.textContent=t,p.textContent=s}));i.addEventListener("click",(()=>{u.open(),u.setEventListeners();const e=u._popup.querySelectorAll(".form__input");e[0].value=l.textContent,e[1].value=p.textContent,new o({formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__button-submit",inactiveButtonClass:"form__button-submit_disabled",inputErrorClass:"form__input_type_error",errorClass:".form__error_visible"},u._popup).enableValidation()}))})();